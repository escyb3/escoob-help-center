<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>××¨×›×– ××©×—×§×™ ×—× ×•×›×”</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Assistant:wght@300;400;700;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Assistant', sans-serif; }
        .game-canvas { height: 500px; }
        @keyframes bounce-subtle { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-5px); } }
        .animate-bounce-subtle { animation: bounce-subtle 2s infinite; }
        .fade-in { animation: fadeIn 0.5s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="bg-slate-50 text-slate-900 min-h-screen overflow-hidden">

    <div id="app" class="flex flex-col md:flex-row h-screen">
        <!-- Sidebar Navigation -->
        <nav class="fixed bottom-0 w-full md:relative md:w-24 bg-white border-t md:border-t-0 md:border-l flex md:flex-col justify-around md:justify-center items-center p-4 gap-8 z-50 shadow-lg">
            <button onclick="showSection('lobby')" class="nav-btn p-4 rounded-2xl transition-all text-blue-600 bg-blue-50" id="btn-lobby">
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>
            </button>
            <button onclick="showSection('leaderboard')" class="nav-btn p-4 rounded-2xl transition-all text-slate-300 hover:text-slate-600" id="btn-leaderboard">
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 9H4.5a2.5 2.5 0 0 1 0-5H6"/><path d="M18 9h1.5a2.5 2.5 0 0 0 0-5H18"/><path d="M4 22h16"/><path d="M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22"/><path d="M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22"/><path d="M18 2H6v7a6 6 0 0 0 12 0V2Z"/></svg>
            </button>
        </nav>

        <!-- Main Content Area -->
        <main class="flex-1 overflow-y-auto pb-24 md:pb-0">
            <!-- Lobby Section -->
            <section id="lobby" class="section p-8 max-w-6xl mx-auto fade-in">
                <header class="mb-12">
                    <div class="flex items-center gap-4 mb-2">
                        <div class="w-12 h-1 bg-yellow-400 rounded-full"></div>
                        <span class="text-yellow-600 font-bold tracking-widest uppercase text-sm italic">Hanukkah Special 2024</span>
                    </div>
                    <h1 class="text-6xl font-black text-slate-900 mb-2">×¢×•×œ× ×”××©×—×§×™×</h1>
                    <p class="text-2xl text-blue-600 font-medium italic">×—×’ ××•×¨×™× ×©××— ×•××œ× ××ª×’×¨×™×!</p>
                </header>

                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8" id="games-grid">
                    <!-- Games will be injected here -->
                </div>
            </section>

            <!-- Game Player Section -->
            <section id="game-view" class="section hidden h-full flex flex-col fade-in">
                <div class="bg-white p-5 flex justify-between items-center shadow-sm border-b">
                    <button onclick="showSection('lobby')" class="flex items-center gap-2 text-slate-600 font-bold hover:text-blue-600 px-4 py-2 rounded-xl transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m15 18-6-6 6-6"/></svg>
                        ×—×–×¨×” ×œ×œ×•×‘×™
                    </button>
                    <h2 id="current-game-title" class="text-xl font-black text-slate-800 uppercase text-center flex-1">×©× ×”××©×—×§</h2>
                </div>
                <div class="flex-1 p-4 flex items-center justify-center overflow-hidden bg-slate-100" id="game-container">
                    <!-- Game content injected here -->
                </div>
            </section>

            <!-- Leaderboard Section -->
            <section id="leaderboard" class="section hidden p-8 max-w-4xl mx-auto fade-in">
                <div class="flex items-center justify-between mb-8">
                    <h1 class="text-4xl font-black text-slate-900 tracking-tight">×”×™×›×œ ×”×ª×”×™×œ×”</h1>
                </div>
                <div class="bg-white rounded-[2rem] shadow-xl overflow-hidden border border-slate-100">
                    <div class="bg-slate-900 p-6 text-white flex justify-between items-center font-bold">
                        <span class="w-1/6 text-center">××™×§×•×</span>
                        <span class="w-2/6 text-right">×©×—×§×Ÿ</span>
                        <span class="w-2/6 text-right">××©×—×§</span>
                        <span class="w-1/6 text-left">×¦×™×•×Ÿ</span>
                    </div>
                    <div id="leaderboard-list" class="divide-y divide-gray-50 min-h-[400px]">
                        <!-- Results injected here -->
                    </div>
                </div>
            </section>
        </main>
    </div>

    <script>
        // Game Data & Scores
        let scores = [];
        const games = [
            { id: 'hanukkah_race', title: '××¨×•×¥ ×”×¡×•×¤×’× ×™×•×ª', description: '×–×¨×™×–×•×ª: ××¡×¤×• ×¡×•×¤×’× ×™×•×ª ×•×”×™×× ×¢×• ××¡×‘×™×‘×•× ×™×.', grade: '×-×’', icon: 'ğŸ©', color: 'bg-white', textColor: 'text-slate-900' },
            { id: 'trivia_kids', title: '××•××—×” ×—× ×•×›×” (×“-×–)', description: '×—×™×“×•×Ÿ ×—× ×•×›×” ×××ª×’×¨ ×œ×™×œ×“×™× ×’×“×•×œ×™×.', grade: '×“-×–', icon: 'â­', color: 'bg-blue-600', textColor: 'text-white' },
            { id: 'trivia_adults', title: '×—×›××™ ×—× ×•×›×” (××‘×•×’×¨×™×)', description: '24 ×©××œ×•×ª ×§×©×•×ª ×¢×œ ××§×•×¨×•×ª ×•×”×™×¡×˜×•×¨×™×”.', grade: '××‘×•×’×¨×™×', icon: 'ğŸ“œ', color: 'bg-slate-900', textColor: 'text-white' },
            { id: 'dreidel_gold', title: '×¡×‘×™×‘×•×Ÿ ×”×–×”×‘', description: '×–×”×• ××ª ×”××•×ª ×”××•×¤×™×¢×” ×‘××”×™×¨×•×ª.', grade: '×‘-×“', icon: 'ğŸŒ€', color: 'bg-white', textColor: 'text-slate-900' },
            { id: 'candle_light', title: '×¦×™×™×“ ×”×©××©×™×', description: '×”×§×œ×™×§×• ×¢×œ ×”× ×¨×•×ª ×©××•×¤×™×¢×™× ×•× ×¢×œ××™×.', grade: '×’-×•', icon: 'ğŸ•¯ï¸', color: 'bg-white', textColor: 'text-slate-900' }
        ];

        function showSection(sectionId) {
            document.querySelectorAll('.section').forEach(s => s.classList.add('hidden'));
            document.getElementById(sectionId).classList.remove('hidden');
            if(sectionId === 'leaderboard') renderLeaderboard();
        }

        function renderLobby() {
            const grid = document.getElementById('games-grid');
            grid.innerHTML = games.map((game, idx) => `
                <div class="${game.color} ${game.textColor} p-8 rounded-[2.5rem] shadow-sm hover:shadow-2xl transition-all border border-slate-100 cursor-pointer flex flex-col group fade-in" 
                     onclick="launchGame('${game.id}')">
                    <div class="mb-6 w-16 h-16 rounded-2xl flex items-center justify-center text-4xl bg-black/5 group-hover:scale-110 transition-transform">${game.icon}</div>
                    <span class="bg-blue-50/20 px-3 py-1 rounded-full text-xs font-bold w-fit mb-3">${game.grade}</span>
                    <h3 class="text-3xl font-black mb-2">${game.title}</h3>
                    <p class="opacity-70 text-lg mb-8 flex-1">${game.description}</p>
                    <button class="w-full bg-yellow-400 text-slate-900 py-4 rounded-2xl font-bold text-xl transition-all active:scale-95">×©×—×§ ×¢×›×©×™×•</button>
                </div>
            `).join('');
        }

        function launchGame(gameId) {
            const game = games.find(g => g.id === gameId);
            document.getElementById('current-game-title').innerText = game.title;
            showSection('game-view');
            const container = document.getElementById('game-container');
            container.innerHTML = '';

            if (gameId === 'hanukkah_race') startRace(container);
            else if (gameId === 'trivia_kids') startTrivia(container, 'kids');
            else if (gameId === 'trivia_adults') startTrivia(container, 'adults');
            else if (gameId === 'dreidel_gold') startDreidel(container);
            else if (gameId === 'candle_light') startCandleHunt(container);
        }

        // --- ××©×—×§ 1: ××¨×•×¥ ×”×¡×•×¤×’× ×™×•×ª ---
        function startRace(container) {
            container.innerHTML = `
                <div class="w-full max-w-xl bg-blue-50 rounded-3xl p-4 game-canvas relative overflow-hidden border-4 border-blue-200" id="race-bg">
                    <div id="race-intro" class="absolute inset-0 flex flex-col items-center justify-center text-center p-6 z-20">
                        <h2 class="text-4xl font-black text-blue-900 mb-4">××¨×•×¥ ×”×¡×•×¤×’× ×™×•×ª</h2>
                        <button onclick="beginRace()" class="bg-yellow-400 px-12 py-4 rounded-full font-bold text-2xl shadow-xl">×§×“×™××”!</button>
                    </div>
                    <div id="player" class="hidden absolute bottom-8 text-6xl" style="left: 50%;">ğŸ•</div>
                </div>`;
            window.beginRace = () => {
                document.getElementById('race-intro').classList.add('hidden');
                const player = document.getElementById('player');
                player.classList.remove('hidden');
                let score = 0;
                const bg = document.getElementById('race-bg');
                bg.onmousemove = (e) => {
                    let rect = bg.getBoundingClientRect();
                    let x = ((e.clientX - rect.left) / rect.width) * 100;
                    player.style.left = Math.max(0, Math.min(90, x)) + '%';
                };
                const interval = setInterval(() => {
                    const item = document.createElement('div');
                    const isGood = Math.random() > 0.3;
                    item.innerHTML = isGood ? 'ğŸ©' : 'ğŸŒ€';
                    item.className = 'absolute text-4xl';
                    item.style.left = Math.random() * 90 + '%';
                    item.style.top = '-50px';
                    bg.appendChild(item);
                    let pos = -50;
                    const fall = setInterval(() => {
                        pos += 5;
                        item.style.top = pos + 'px';
                        let pL = parseFloat(player.style.left);
                        let iL = parseFloat(item.style.left);
                        if (pos > 380 && pos < 430 && Math.abs(pL - iL) < 10) {
                            if (isGood) { score += 10; item.remove(); clearInterval(fall); }
                            else { clearInterval(interval); clearInterval(fall); saveScoreModal(score, '××¨×•×¥ ×”×¡×•×¤×’× ×™×•×ª'); }
                        }
                        if (pos > 500) { item.remove(); clearInterval(fall); }
                    }, 30);
                }, 800);
            };
        }

        // --- ××©×—×§ 2: ×—×™×“×•× ×™× (×™×œ×“×™× ×“-×– ×•××‘×•×’×¨×™× ××©×•×“×¨×’) ---
        function startTrivia(container, mode) {
            const kidsQs = [
                { q: "×›×™×¦×“ × ×§×¨× ×”×¡×¤×¨ ×©××¡×¤×¨ ×¢×œ ×’×‘×•×¨×ª ×”××›×‘×™×?", a: ["×¡×¤×¨ ××›×‘×™×", "××’×™×œ×ª ××¡×ª×¨", "×¡×¤×¨ ×‘×¨××©×™×ª"], c: 0 },
                { q: "××™ ×”×™×” ××‘×™×”× ×©×œ ×—××©×ª ×”×—×©××•× ××™×?", a: ["×™×”×•×“×”", "××ª×ª×™×”×•", "××œ×¢×–×¨"], c: 1 },
                { q: "××™×–×• ××•×ª ××•×¤×™×¢×” ×‘×¡×‘×™×‘×•×Ÿ ×‘×—×•'×œ ×‘××§×•× ×”××•×ª ×¤'?", a: ["×©", "×¨", "×›"], c: 0 },
                { q: "××”×• ×¤×™×¨×•×© ×”××™×œ×” '××›×‘×™' ×¢×œ ×¤×™ ×¨××©×™ ×”×ª×™×‘×•×ª?", a: ["××™ ×›××•×š ×‘××œ×™× ×”'", "××œ×š ×›×‘×•×“ ×‘× ×™ ×™×©×¨××œ", "××œ×—××ª ×›×‘×•×“ ×‘× ×™ ×™×”×•×“×”"], c: 0 },
                { q: "×›××” ×§× ×™× ×™×© ×‘×× ×•×¨×ª ×”××§×“×© (×œ× ×‘×—× ×•×›×™×™×”)?", a: ["8", "7", "9"], c: 1 }
            ];
            const adultQs = [
                { q: "××™ ×”×™×” ×”×¤×§×™×“ ×”×™×•×•× ×™ ×©× ×”×¨×’ ×¢'×™ ××ª×ª×™×”×• ×‘××•×“×™×¢×™×Ÿ?", a: ["××¤×œ×¡", "×œ×™×¡×™××¡", "× ×™×§× ×•×¨"], c: 0 },
                { q: "××”×• ×”×’×•×‘×” ×”××§×¡×™××œ×™ ×”×›×©×¨ ×œ×”× ×—×ª ×—× ×•×›×™×™×” (×œ××¢×œ×” ××× ×• ××™× ×” ×›×©×¨×”)?", a: ["10 ×˜×¤×—×™×", "20 ×××”", "50 ×××”"], c: 1 },
                { q: "×‘××™×–×” ×§×¨×‘ × ×¤×œ ×™×”×•×“×” ×”××›×‘×™?", a: ["××××•×¡", "×‘×™×ª ×—×•×¨×•×Ÿ", "××œ×¢×©×”"], c: 2 },
                { q: "××“×•×¢ ××•×›×œ×™× ×××›×œ×™ ×’×‘×™× ×” ×‘×—× ×•×›×”?", a: ["×–×›×¨ ×œ××–×•×Ÿ ×”××›×‘×™×", "×–×›×¨ ×œ×¡×™×¤×•×¨ ×™×”×•×“×™×ª", "×¡×™××Ÿ ×œ×©×¤×¢"], c: 1 },
                { q: "××”×• ×¡×“×¨ ×”×”×“×œ×§×” ×œ×¤×™ ×‘×™×ª ×”×œ×œ?", a: ["××•×¡×™×£ ×•×”×•×œ×š", "×¤×•×—×ª ×•×”×•×œ×š", "×§×‘×•×¢"], c: 0 },
                { q: "×‘××™×–×• ××¡×›×ª ×‘×’××¨× ××•×¤×™×¢×™× ×”×œ×›×•×ª ×—× ×•×›×”?", a: ["××¡×›×ª ×‘×¨×›×•×ª", "××¡×›×ª ×©×‘×ª", "××¡×›×ª ×¤×¡×—×™×"], c: 1 },
                { q: "××™ ×”×™×” ×”××œ×š ×”×¡×œ×•×•×§×™ ×©×’×–×¨ ××ª ×”×’×–×™×¨×•×ª ×¢×œ ×”×™×”×•×“×™×?", a: ["×× ×˜×™×•×›×•×¡ ×”×¨×‘×™×¢×™", "×ª×œ××™ ×”×©××™× ×™", "××œ×›×¡× ×“×¨ ××•×§×“×•×Ÿ"], c: 0 },
                { q: "×›×™×¦×“ × ×”×¨×’ ××œ×¢×–×¨ ×”××›×‘×™?", a: ["× ×¤×™×œ×” ××—×•××•×ª ×™×¨×•×©×œ×™×", "×ª×—×ª ×¤×™×œ ××œ×—××”", "×‘×§×¨×‘ ××•×œ × ×™×§× ×•×¨"], c: 1 },
                { q: "××” ××©××¢×•×ª ×”×©× '×—× ×•×›×”' ×¢×œ ×¤×™ ×”××“×¨×©?", a: ["×—× ×›×• ××ª ×”××–×‘×—", "×—× ×” ×‘×›'×”", "×©× ×™×”× × ×›×•× ×™×"], c: 2 },
                { q: "×›××” ×‘×¨×›×•×ª ××‘×¨×›×™× ×‘×¢×¨×‘ ×”×¨××©×•×Ÿ ×©×œ ×—× ×•×›×”?", a: ["2", "3", "4"], c: 1 },
                { q: "××™×–×” '×¤×¨×¡×•× ×”× ×¡' ×”×•× ×”×¢×“×™×£ ×‘× ×¨ ×—× ×•×›×”?", a: ["×‘×‘×™×ª ×”×›× ×¡×ª", "×‘×—×¦×¨ ×›×œ×¤×™ ×—×•×¥", "×¢×œ ×©×•×œ×—×Ÿ ×”××•×›×œ"], c: 1 },
                { q: "××™ ×”×™×” ×”×›×”×Ÿ ×”×’×“×•×œ ×©×¤×ª×— ××ª ×”××¨×“?", a: ["××ª×ª×™×”×• ×‘×Ÿ ×™×•×—× ×Ÿ", "×©××¢×•×Ÿ ×”×ª×¨×¡×™", "×™×•×—× ×Ÿ ×”×•×¨×§× ×•×¡"], c: 0 },
                { q: "×‘××™×–×” ×ª××¨×™×š ×¢×‘×¨×™ ×—×œ ×—×’ ×”×—× ×•×›×”?", a: ["×›'×” ×‘×›×¡×œ×•", "×˜'×• ×‘×©×‘×˜", "×™'×“ ×‘××“×¨"], c: 0 },
                { q: "××™×–×” ×¤×¡×•×§ × ×”×•×’ ×œ×•××¨ ×‘×–××Ÿ ×”×“×œ×§×ª ×”× ×¨×•×ª?", a: ["×”× ×¨×•×ª ×”×œ×œ×•", "××–××•×¨ ×©×™×¨ ×—× ×•×›×ª ×”×‘×™×ª", "×©× ×™×”× × ×›×•× ×™×"], c: 2 },
                { q: "××”×• ×”×–××Ÿ ×”××™× ×™××œ×™ ×©×‘×• ×”× ×¨×•×ª ×—×™×™×‘×™× ×œ×“×œ×•×§?", a: ["×©×¢×”", "×—×¦×™ ×©×¢×”", "×¨×‘×¢ ×©×¢×”"], c: 1 },
                { q: "×”×× ××•×ª×¨ ×œ×”×©×ª××© ×‘××•×¨ × ×¨×•×ª ×”×—× ×•×›×” ×œ×¦×¨×›×™× ××™×©×™×™×?", a: ["×›×Ÿ", "×œ×", "×¨×§ ×‘×©×¢×ª ×”×“×—×§"], c: 1 },
                { q: "××” ×”×™×™×ª×” ×”×¡×™×‘×” ×”×¢×™×§×¨×™×ª ×œ××¨×“ ×”××›×‘×™× ×‘××§×•×¨?", a: ["××™×¡×™× ×›×‘×“×™×", "×’×–×™×¨×•×ª ×“×ª ×•×”×ª×™×™×•×•× ×•×ª", "×¨×¦×•×Ÿ ×œ××œ×•×›×”"], c: 1 },
                { q: "××™×–×” ×©××Ÿ ×”×•× ×”××•×‘×—×¨ ×‘×™×•×ª×¨ ×œ×”×“×œ×§×ª × ×¨×•×ª ×—× ×•×›×”?", a: ["×©××Ÿ ×§× ×•×œ×”", "×©××Ÿ ×–×™×ª", "×©××Ÿ ×¡×•×™×”"], c: 1 },
                { q: "××™ ××‘×™×Ÿ ×”××—×™× ×”××›×‘×™× ×”×™×” ×”××—×¨×•×Ÿ ×©× ×•×ª×¨ ×‘×—×™×™× ×•×”× ×”×™×’?", a: ["×™×”×•×“×”", "×©××¢×•×Ÿ", "×™×•×—× ×Ÿ"], c: 1 },
                { q: "××”×• '×©××©' ×‘×—× ×•×›×™×™×”?", a: ["×”× ×¨ ×”×’×‘×•×” ×©×‘×• ××“×œ×™×§×™×", "×”× ×¨ ×”×¨××©×•×Ÿ ×©××“×œ×™×§×™×", "× ×¨ ×”×–×™×›×¨×•×Ÿ"], c: 0 },
                { q: "×‘××™×–×• ×¢×™×¨ ×”×—×œ ×”××¨×“?", a: ["×™×¨×•×©×œ×™×", "××•×“×™×¢×™×Ÿ", "×™×¨×™×—×•"], c: 1 },
                { q: "××™×–×” '×§×¨×‘' × ×—×©×‘ ×œ××—×“ ×”× ×™×¦×—×•× ×•×ª ×”×˜×§×˜×™×™× ×”×’×“×•×œ×™× ×©×œ ×™×”×•×“×”?", a: ["×§×¨×‘ ××××•×¡", "×§×¨×‘ ×‘×™×ª ×¦×•×¨", "×§×¨×‘ ×›×¤×¨ ×©×œ××"], c: 0 },
                { q: "××”×™×›×Ÿ ×”×’×™×¢ ×”×©× '××›×‘×™' ×¢×œ ×¤×™ ×¤×™×¨×•×© × ×•×¡×£?", a: ["×©× ×©×œ ×¤×˜×™×©", "×©× ××©×¤×—×” ×¢×ª×™×§", "×”××•×ª×™×•×ª ×”×¨××©×•× ×•×ª ×©×œ ×××"], c: 0 },
                { q: "××” ×§×¨××• ×”××›×‘×™× ×›××©×¨ × ×›× ×¡×• ×œ×‘×™×ª ×”××§×“×©?", a: ["×ª×”×™×œ×™×", "×”×œ×œ", "×©×™×¨ ×”×©×™×¨×™×"], c: 1 }
            ];
            const qs = mode === 'kids' ? kidsQs : adultQs;
            let current = 0, score = 0;
            function render() {
                if (current >= qs.length) return saveScoreModal(score * 25, mode === 'kids' ? '××•××—×” ×—× ×•×›×”' : '×—×›××™ ×—× ×•×›×”');
                container.innerHTML = `<div class="bg-white p-10 rounded-3xl shadow-xl max-w-lg w-full text-right fade-in">
                    <div class="mb-4 text-sm text-slate-400">×©××œ×” ${current+1} ××ª×•×š ${qs.length}</div>
                    <h3 class="text-2xl font-bold mb-6">${qs[current].q}</h3>
                    <div class="space-y-4">${qs[current].a.map((ans, i) => `<button onclick="window.ansT(${i})" class="w-full p-4 border-2 rounded-xl hover:bg-blue-50 hover:border-blue-300 text-right transition-all font-medium">${ans}</button>`).join('')}</div>
                </div>`;
            }
            window.ansT = (i) => { if(i === qs[current].c) score++; current++; render(); };
            render();
        }

        // --- ××©×—×§ 3: ×¡×‘×™×‘×•×Ÿ ×”×–×”×‘ ---
        function startDreidel(container) {
            let score = 0, timeLeft = 20, currentL = '';
            const letters = ['× ', '×’', '×”', '×¤'];
            function next() { currentL = letters[Math.floor(Math.random()*4)]; document.getElementById('d-l').innerText = currentL; }
            container.innerHTML = `<div class="bg-indigo-600 text-white p-10 rounded-3xl text-center w-80 shadow-2xl border-4 border-indigo-400">
                <div class="flex justify-between mb-4 font-bold"><span id="d-time">×–××Ÿ: 20</span><span>× ×™×§×•×“: <span id="d-score">0</span></span></div>
                <div id="d-l" class="text-8xl font-black mb-8 bg-white/10 py-8 rounded-2xl shadow-inner">?</div>
                <div class="grid grid-cols-2 gap-3">${letters.map(l => `<button onclick="window.hitD('${l}')" class="bg-white text-indigo-900 p-5 rounded-xl text-3xl font-black hover:bg-yellow-400 transition-all active:scale-90">${l}</button>`).join('')}</div>
            </div>`;
            const timer = setInterval(() => { 
                timeLeft--; 
                if(timeLeft <= 0) { clearInterval(timer); saveScoreModal(score, '×¡×‘×™×‘×•×Ÿ ×”×–×”×‘'); }
                else document.getElementById('d-time').innerText = '×–××Ÿ: ' + timeLeft;
            }, 1000);
            window.hitD = (l) => { 
                if(l === currentL) { 
                    score += 20; 
                    document.getElementById('d-score').innerText = score;
                    next(); 
                } 
            };
            next();
        }

        // --- ××©×—×§ 4: ×¦×™×™×“ ×”×©××©×™× ---
        function startCandleHunt(container) {
            let score = 0, timeLeft = 25;
            container.innerHTML = `<div class="relative w-full max-w-xl">
                <div class="absolute top-4 left-4 right-4 flex justify-between text-white font-bold z-20 pointer-events-none">
                    <span id="h-time">×–××Ÿ: 25</span><span id="h-score">× ×™×§×•×“: 0</span>
                </div>
                <div id="h-bg" class="bg-slate-900 w-full h-96 rounded-3xl relative overflow-hidden shadow-2xl border-4 border-slate-700"></div>
            </div>`;
            const bg = document.getElementById('h-bg');
            const timer = setInterval(() => {
                timeLeft--;
                if(timeLeft <= 0) { clearInterval(timer); clearInterval(spawn); saveScoreModal(score, '×¦×™×™×“ ×”×©××©×™×'); }
                else document.getElementById('h-time').innerText = '×–××Ÿ: ' + timeLeft;
            }, 1000);
            const spawn = setInterval(() => {
                const c = document.createElement('div');
                c.innerHTML = 'ğŸ•¯ï¸'; c.className = 'absolute text-5xl cursor-pointer select-none transition-transform active:scale-150';
                c.style.left = Math.random()*85+5+'%'; c.style.top = Math.random()*75+10+'%';
                c.onclick = () => { score += 25; document.getElementById('h-score').innerText = score; c.remove(); };
                bg.appendChild(c);
                setTimeout(() => { if(c.parentNode) c.remove(); }, 850);
            }, 700);
        }

        // --- ×¤×•× ×§×¦×™×•×ª ×¢×–×¨: ×©××™×¨×ª × ×™×§×•×“ ×•×œ×•×— ×©×™××™× ---
        function saveScoreModal(score, gameName) {
            const container = document.getElementById('game-container');
            container.innerHTML = `<div class="bg-white p-10 rounded-[2.5rem] shadow-2xl text-center max-w-sm w-full fade-in border-4 border-yellow-100">
                <div class="text-5xl mb-4">ğŸ†</div>
                <h2 class="text-3xl font-black mb-2">×›×œ ×”×›×‘×•×“!</h2>
                <p class="text-xl mb-6 text-blue-600 font-bold italic">×¦×‘×¨×ª ${score} × ×§×•×“×•×ª ×‘${gameName}</p>
                <input id="p-name" type="text" placeholder="××” ×”×©× ×©×œ×š?" class="p-4 border-2 rounded-2xl mb-4 w-full text-center font-bold outline-none focus:border-blue-400">
                <button onclick="window.fin('${gameName}', ${score})" class="bg-slate-900 text-white p-4 rounded-2xl w-full font-black text-xl hover:bg-blue-600 transition-colors">×©××•×¨ ×ª×•×¦××”</button>
            </div>`;
        }

        window.fin = (g, s) => { 
            const name = document.getElementById('p-name').value || '×©×—×§×Ÿ ×× ×•× ×™××™';
            scores.push({name: name, score: s, game: g}); 
            showSection('leaderboard'); 
        };

        function renderLeaderboard() {
            const list = document.getElementById('leaderboard-list');
            if (scores.length === 0) {
                list.innerHTML = `<div class="p-20 text-center text-slate-400 italic">×¢×“×™×™×Ÿ ××™×Ÿ ×©×™××™×... ×ª×”×™×• ×”×¨××©×•× ×™×!</div>`;
                return;
            }
            list.innerHTML = scores.sort((a,b) => b.score - a.score).map((s, i) => `
                <div class="flex justify-between items-center p-6 hover:bg-slate-50 transition-colors">
                    <span class="w-1/6 text-center text-xl font-black ${i < 3 ? 'text-blue-600' : 'text-slate-300'}">${i+1}</span>
                    <span class="w-2/6 text-right font-bold text-slate-800">${s.name}</span>
                    <span class="w-2/6 text-right text-slate-500 text-sm italic">${s.game}</span>
                    <span class="w-1/6 text-left font-black text-2xl text-blue-600">${s.score}</span>
                </div>
            `).join('');
        }

        renderLobby();
    </script>
</body>
</html>
